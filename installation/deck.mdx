import {CodeSurfer} from "code-surfer";
import defaultTheme, {highlight} from 'mdx-deck/themes'
import {Notes, Appear} from 'mdx-deck'
import {Logo, JavaScriptRepl} from '../components'
import tsLogo from '../assets/ts-logo.svg'
import tdd from '../assets/tdd.jpg'

export const theme = {
  ...defaultTheme,
  ...highlight
}

# Desarrollo con TypeScript

<img src={tsLogo}/>

<Logo/>

---

## Inicializar Proyecto NPM

- `> npm init`
- `> npm init -y`

<Logo/>

---

## Instalar Typescript

`> npm install typescript --save-dev`

<Logo/>

---

## Inicializar configuración de Typescript

`> tsc --init`

<Logo/>

---

## Añadir y configurar test runner

1. `> npm install jest @types/jest ts-jest ts-node --save-dev`
1. `> jest --init`

<Logo/>

---

<CodeSurfer>

```json title="Ejemplo de jest.config.json"
  {
    "roots": ["<rootDir>/test"],
    "testMatch": ["**/__tests__/**/*.+(ts|js)", "**/?(*.)+(spec|test).+(ts|js)"],
    "transform": {
      "^.+\\.(ts)?$": "ts-jest"
    },
    "setupFilesAfterEnv": ["<rootDir>/test/setupTests.ts"]
  }
```

```diff 7
```

</CodeSurfer>

<Logo/>

<Notes>

  1. Tests con TypeScript y Jest
  1. Poner dibujo: copa de tests
  1. describe / it
  1. Helpers: repaso builders / expects por clases
  1. jest.config.json
  1. Explicar un fichero de ejemplo
  1. setupTests.ts

</Notes>

---

## Transpilación

<Logo/>

<Notes>

  - No entrar en detalles de SOLID!!
  - ¿?

</Notes>

---

<CodeSurfer>

```typescript title="Testing"
  class Calculator {
    static sum(a: number, b: number): number {
      return a + b
    }
  }

  describe('Calculator should', () => {
    it('sum', () => {
      expect(Calculator.sum(2, 2)).toBe(4)
    })
  })
```

```diff 1:5
```
```diff 7:11
```
```diff 8:10
```
```diff 9 
```

</CodeSurfer>

---

## Ciclo del TDD

<img src={tdd}/>

<Logo/>

<Notes>

  - Rojo: Escribes el test para que dé en rojo (o esperando a que dé en rojo)
  - Verde: Implementas el caso en especifico para que dé en verde, manteniendo los casos anteriores en verde
  - Refactor: Le das más legibilidad, más entendible, más lógico...

</Notes>
